@page "/"

<PageTitle>Books</PageTitle>

@using System.Net.Http.Json
@using alexandria.web.Models
@inject HttpClient httpClient

<MudTable Items="@BooksList" Hover="true" Breakpoint="Breakpoint.Sm">
    <HeaderContent>
        <MudTh>Title</MudTh>
        <MudTh>Authors</MudTh>
        <MudTh>Series</MudTh>
    </HeaderContent>
    <RowTemplate>
        <MudTd DataLabel="Title">@context.Title</MudTd>
        <MudTd DataLabel="Authors">@context.Authors</MudTd>
        <MudTd DataLabel="Series">@context.SeriesInfo</MudTd>
    </RowTemplate>
</MudTable>

@code {
    private IEnumerable<Book> BooksList = new List<Book>();

    protected override async Task OnInitializedAsync()
    {
        var result = await
        httpClient.GetFromJsonAsync<List<Book>>("https://books.internal.thirdember.com/api/Books?page=1&limit=10");
        BooksList = result ?? new List<Book>();
    }
}